{"version":3,"file":"ionic-rating-component.js","sources":["ng://ionic-rating-component/lib/ionic-rating.service.ts","ng://ionic-rating-component/lib/ionic-rating.component.ts","ng://ionic-rating-component/lib/ionic-rating.module.ts","ng://ionic-rating-component/public-api.ts","ng://ionic-rating-component/ionic-rating-component.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IonicRatingService {\n\n  private starRatingSubject = new Subject<number>();\n  private topicSubject = new Subject<{ [key: string]: any }>();\n\n  publishStartRatingChanged(value: number) {\n    this.starRatingSubject.next(value);\n  }\n\n  getStartRatingChangedObservable(): Subject<any> {\n    return this.starRatingSubject;\n  }\n\n  publishTopic(topic: string, value: number) {\n    this.topicSubject.next({ topic, value });\n  }\n\n  getTopicObservable(key): Subject<any> {\n    return this.topicSubject[key];\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IonicRatingService } from './ionic-rating.service';\n\n@Component({\n  selector: 'ionic-rating-component',\n  template: `\n    <div class=\"ionic5-star-rating\">\n      <ion-button size=\"large\" fill=\"clear\" class=\"rate-button\" [ngStyle]=\"{'width' : fontSize, 'height' : fontSize}\" *ngFor=\"let index of iconsArray\" id=\"{{index}}\" (click)=\"changeRating($event)\">\n        <ion-icon [ngStyle]=\"{'color': ((halfStar === 'false' && index < this.Math.round(this.parseFloat(rating))) || (halfStar === 'true' && index < this.parseFloat(rating))) ? activeColor : defaultColor, 'font-size' : fontSize }\" name=\"{{(halfStar ==='true' && (rating - index > 0) && (rating - index <= 0.5)) ? halfIcon : (index < this.Math.round(this.parseFloat(rating))) ? activeIcon : defaultIcon}}\"></ion-icon>\n      </ion-button>\n    </div>\n  `, styles: [`\n    .rate-button {\n            --padding-bottom:0;\n            --padding-end:0;\n            --padding-start:0;\n            --padding-top:0;\n    }\n  `],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: IonicRatingComponent,\n      multi: true,\n    },\n  ],\n})\nexport class IonicRatingComponent implements ControlValueAccessor, OnInit {\n  @Input()\n  public set rating(val: number) {\n    this._rating = val;\n    if (this.onChange) {\n      this.onChange(val);\n    }\n  }\n\n\n  public get rating(): number {\n    return this._rating;\n  }\n\n\n  constructor(private ionicRatingService: IonicRatingService) {\n    this.Math = Math;\n    this.parseFloat = parseFloat;\n  }\n  private _rating: number;\n  private onChange: any;\n  private onTouched: any;\n  public disabled: boolean;\n  Math: any;\n  parseFloat: any;\n  iconsArray: number[] = [];\n  @Output()\n  ratingChanged: EventEmitter<number> = new EventEmitter<number>();\n  @Input()\n  readonly: string = 'false';\n  @Input()\n  activeColor: string = '#488aff';\n  @Input()\n  defaultColor: string = '#aaaaaa';\n  @Input()\n  activeIcon: string = 'star';\n  @Input()\n  defaultIcon: string = 'star-outline';\n  @Input()\n  halfIcon: string = 'star-half';\n  @Input()\n  halfStar: string = 'false';\n  @Input()\n  maxRating: number = 5;\n  @Input()\n  fontSize: string = '28px';\n\n  public readonly eventInfo = (() => {\n    const id = new Date().getTime();\n    const topic = `star-rating:${id}:changed`;\n    return {\n      topic,\n    };\n  })();\n\n  ngOnInit(): void {\n    this.rating = this.rating || 3; //default after input`s initialization\n    for (let i = 0; i < this.maxRating; i++) {\n      this.iconsArray.push(i);\n    }\n  }\n\n  writeValue(obj: number): void {\n    this.rating = obj;\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    this.readonly = isDisabled ? \"true\" : \"false\";\n  }\n\n  changeRating(event) {\n    if (this.readonly && this.readonly === 'true') return;\n    // event is different for firefox and chrome\n    let id = event.target.id ? parseInt(event.target.id) : parseInt(event.target.parentElement.id);\n    if (this.halfStar && this.halfStar === 'true') {\n      this.rating = ((this.rating - id > 0) && (this.rating - id <= 0.5)) ? id + 1 : id + .5;\n    } else {\n      this.rating = id + 1;\n    }\n    // subscribe this event to get the changed value in your parent compoanent\n    this.ionicRatingService.publishStartRatingChanged(this.rating);\n    this.ionicRatingService.publishTopic(this.eventInfo.topic, this.rating);\n    // unique event\n    this.ratingChanged.emit(this.rating);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { IonicRatingComponent } from './ionic-rating.component';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\n\n\n\n@NgModule({\n  declarations: [IonicRatingComponent],\n  imports: [\n    CommonModule,\n    IonicModule,\n  ],\n  exports: [IonicRatingComponent]\n})\nexport class IonicRatingComponentModule { }\n","/*\n * Public API Surface of ionic-rating\n */\n\nexport * from './lib/ionic-rating.service';\nexport * from './lib/ionic-rating.component';\nexport * from './lib/ionic-rating.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}