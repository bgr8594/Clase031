{"version":3,"file":"ionic-rating-component.js","sources":["ng://ionic-rating-component/lib/ionic-rating.service.ts","ng://ionic-rating-component/lib/ionic-rating.component.ts","ng://ionic-rating-component/lib/ionic-rating.module.ts","ng://ionic-rating-component/public-api.ts","ng://ionic-rating-component/ionic-rating-component.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IonicRatingService {\n\n  private starRatingSubject = new Subject<number>();\n  private topicSubject = new Subject<{ [key: string]: any }>();\n\n  publishStartRatingChanged(value: number) {\n    this.starRatingSubject.next(value);\n  }\n\n  getStartRatingChangedObservable(): Subject<any> {\n    return this.starRatingSubject;\n  }\n\n  publishTopic(topic: string, value: number) {\n    this.topicSubject.next({ topic, value });\n  }\n\n  getTopicObservable(key): Subject<any> {\n    return this.topicSubject[key];\n  }\n}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IonicRatingService } from './ionic-rating.service';\n\n@Component({\n  selector: 'ionic-rating-component',\n  template: `\n    <div class=\"ionic5-star-rating\">\n      <ion-button size=\"large\" fill=\"clear\" class=\"rate-button\" [ngStyle]=\"{'width' : fontSize, 'height' : fontSize}\" *ngFor=\"let index of iconsArray\" id=\"{{index}}\" (click)=\"changeRating($event)\">\n        <ion-icon [ngStyle]=\"{'color': ((halfStar === 'false' && index < this.Math.round(this.parseFloat(rating))) || (halfStar === 'true' && index < this.parseFloat(rating))) ? activeColor : defaultColor, 'font-size' : fontSize }\" name=\"{{(halfStar ==='true' && (rating - index > 0) && (rating - index <= 0.5)) ? halfIcon : (index < this.Math.round(this.parseFloat(rating))) ? activeIcon : defaultIcon}}\"></ion-icon>\n      </ion-button>\n    </div>\n  `, styles: [`\n    .rate-button {\n            --padding-bottom:0;\n            --padding-end:0;\n            --padding-start:0;\n            --padding-top:0;\n    }\n  `],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: IonicRatingComponent,\n      multi: true,\n    },\n  ],\n})\nexport class IonicRatingComponent implements ControlValueAccessor, OnInit {\n  @Input()\n  public set rating(val: number) {\n    this._rating = val;\n    if (this.onChange) {\n      this.onChange(val);\n    }\n  }\n\n\n  public get rating(): number {\n    return this._rating;\n  }\n\n\n  constructor(private ionicRatingService: IonicRatingService) {\n    this.Math = Math;\n    this.parseFloat = parseFloat;\n  }\n  private _rating: number;\n  private onChange: any;\n  private onTouched: any;\n  public disabled: boolean;\n  Math: any;\n  parseFloat: any;\n  iconsArray: number[] = [];\n  @Output()\n  ratingChanged: EventEmitter<number> = new EventEmitter<number>();\n  @Input()\n  readonly: string = 'false';\n  @Input()\n  activeColor: string = '#488aff';\n  @Input()\n  defaultColor: string = '#aaaaaa';\n  @Input()\n  activeIcon: string = 'star';\n  @Input()\n  defaultIcon: string = 'star-outline';\n  @Input()\n  halfIcon: string = 'star-half';\n  @Input()\n  halfStar: string = 'false';\n  @Input()\n  maxRating: number = 5;\n  @Input()\n  fontSize: string = '28px';\n\n  public readonly eventInfo = (() => {\n    const id = new Date().getTime();\n    const topic = `star-rating:${id}:changed`;\n    return {\n      topic,\n    };\n  })();\n\n  ngOnInit(): void {\n    this.rating = this.rating || 3; //default after input`s initialization\n    for (let i = 0; i < this.maxRating; i++) {\n      this.iconsArray.push(i);\n    }\n  }\n\n  writeValue(obj: number): void {\n    this.rating = obj;\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState?(isDisabled: boolean): void {\n    this.readonly = isDisabled ? \"true\" : \"false\";\n  }\n\n  changeRating(event) {\n    if (this.readonly && this.readonly === 'true') return;\n    // event is different for firefox and chrome\n    let id = event.target.id ? parseInt(event.target.id) : parseInt(event.target.parentElement.id);\n    if (this.halfStar && this.halfStar === 'true') {\n      this.rating = ((this.rating - id > 0) && (this.rating - id <= 0.5)) ? id + 1 : id + .5;\n    } else {\n      this.rating = id + 1;\n    }\n    // subscribe this event to get the changed value in your parent compoanent\n    this.ionicRatingService.publishStartRatingChanged(this.rating);\n    this.ionicRatingService.publishTopic(this.eventInfo.topic, this.rating);\n    // unique event\n    this.ratingChanged.emit(this.rating);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { IonicRatingComponent } from './ionic-rating.component';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\n\n\n\n@NgModule({\n  declarations: [IonicRatingComponent],\n  imports: [\n    CommonModule,\n    IonicModule,\n  ],\n  exports: [IonicRatingComponent]\n})\nexport class IonicRatingComponentModule { }\n","/*\n * Public API Surface of ionic-rating\n */\n\nexport * from './lib/ionic-rating.service';\nexport * from './lib/ionic-rating.component';\nexport * from './lib/ionic-rating.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}